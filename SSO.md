# SSO登录注册模块需求文档
## 0.文档描述
| 修订时间 | 修订内容 |修订人 | 备注 |
| --- | --- |--- | --- |
| 2018-11-26 | 文档创建 | 李一凡 | |

## 1.产品架构
### 1.1 业务流程
#### 1.1.1 验证码登录流程
![avatar](../SSO/img/p1_1_1.png)

#### 1.1.2 帐号登录流程
![avatar](../SSO/img/p1_1_2.png)

#### 1.1.3 微信第三方登录流程
![avatar](../SSO/img/p1_1_3.png)

#### 1.1.4 注册流程
![avatar](../SSO/img/p1_1_4.png)

#### 1.1.5 找回密码流程
![avatar](../SSO/img/p1_1_5.png)

### 1.2 页面流图
#### 1.2.1 APP端页面流图
![avatar](../SSO/img/p1_2_1.png)
#### 1.2.2 WEB端页面流图
![avatar](../SSO/img/p1_2_2.png)

## 2.页面说明
|页面编号|页面名称|页面主要功能介绍|
|:--:|:--:|:--:|
|P01|移动端验证码登录页面|提供验证码方式登录APP|
|P02|移动端帐号登录页面|提供帐号密码方式登录APP|
|P03|移动端找回密码页面一|输入注册的手机号|
|P04|移动端找回密码页面二|设置新密码|
|P05|移动端注册页面一|填写手机号等信息|
|P06|移动端注册页面二|修改头像和设置昵称|
|P07|PC端验证码登录页面|提供验证码方式登录|
|P08|PC端帐号登录页面|提供帐号密码方式登录|
|P09|PC端找回密码页面一|输入注册的手机号|
|P10|PC端找回密码页面二|设置新密码|
|P11|PC端注册页面一|填写手机号等信息|
|P12|PC端注册页面二|修改头像和设置昵称|
|P13|微信扫码绑定手机号页面|绑定手机号码并登录|

#### 2.1.1 移动端验证码登录页面（P01）
<table>
  <tr>
    <th style="width:40%">用户界面</th>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td rowspan="999">
      <img src="../img/p2_1_1.png"/>
    </td>
    <td>1</td>
    <td>登录方式选择</td>
    <td>包括快速登录和帐号登录两种方式</td>
  </tr>
  <tr>
    <td>2</td>
    <td>手机号输入框</td>
    <td>用于输入用户的手机号。<li>格式为11位数字，如果输入格式不正确，则在下方用红色字提示：“手机号格式不正确”</li><li>如果输入的手机号没有注册，则在下方用红色字提示：“该手机号未注册”</li></td>
  </tr>
  <tr>
    <td>3</td>
    <td>滑动验证</td>
    <td>用于防止网络攻击，验证通过才能点击【获取验证码】按钮</td>
  </tr>
  <tr>
    <td>4</td>
    <td>获取验证码按钮</td>
    <td>点击将发送验证码短信给用户，再次点击获取的时间间隔为300秒</td>
  </tr>
  <tr>
    <td>5</td>
    <td>短信验证码输入框</td>
    <td>用于输入收到的短信验证码。如果填写的验证码不对，则在下方用红色字提示：“验证码错误”</td>
  </tr>
  <tr>
    <td>6</td>
    <td>登录按钮</td>
    <td>点击之后可以登录APP。默认情况下是灰色不可点击状态，只有用户输入了手机号和验证码之后，该按钮才变为可点击状态。点击之后检验短信验证码是否正确，正确则登录，不正确则弹出提示信息，具体参考【5】</td>
  </tr>
  <tr>
    <td>7</td>
    <td>微信快捷登录</td>
    <td>第三方快捷登录，点击之后调用微信快捷登录</td>
  </tr>
  <tr>
    <td>8</td>
    <td>注册按钮</td>
    <td>点击之后跳转到【移动端注册页面一（P05）】</td>
  </tr>
</table>

#### 2.1.2 移动端帐号登录页面（P02）
<table>
  <tr>
    <th style="width:40%">用户界面</th>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td rowspan="999">
      <img src="../img/p2_1_2.png"/>
    </td>
    <td>1</td>
    <td>登录方式选择</td>
    <td>包括快速登录和帐号登录两种方式</td>
  </tr>
  <tr>
    <td>2</td>
    <td>手机号或用户名输入框</td>
    <td>用于输入用户的手机号或用户名。<li>格式为数字、大小写字母、汉字和下划线。最短为4个字节，最长为16个字节。如果输入格式不正确，则在下方用红色字提示：“手机号或用户名格式不正确”</li><li>如果输入的手机号或用户名不正确，则在下方用红色字提示：“手机号或用户名不正确”</li></td>
  </tr>
  <tr>
    <td>3</td>
    <td>登录密码输入框</td>
    <td>用于输入登录密码。<li>如果输入密码不正确，则在下方用红色字提示：“密码错误”</li></td>
  </tr>
  <tr>
    <td>4</td>
    <td>忘记密码按钮</td>
    <td>点击跳转到【移动端找回密码页面一（P03）】</td>
  </tr>
  <tr>
    <td>5</td>
    <td>登录按钮</td>
    <td>点击之后可以登录APP。默认情况下是灰色不可点击状态，只有用户输入了手机号/用户名和密码之后，该按钮才变为可点击状态。点击之后检验手机号/用户名和密码是否正确匹配，正确则登录，不正确则弹出提示信息，具体参考【2】和【3】</td>
  </tr>
  <tr>
    <td>6</td>
    <td>微信快捷登录</td>
    <td>第三方快捷登录，点击之后调用微信快捷登录</td>
  </tr>
  <tr>
    <td>7</td>
    <td>注册按钮</td>
    <td>点击之后跳转到移动端注册页面一</td>
  </tr>
</table>

#### 2.1.3 移动端找回密码页面一（P03）
<table>
  <tr>
    <th style="width:40%">用户界面</th>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td rowspan="999">
      <img src="../img/p2_1_3.png"/>
    </td>
    <td>1</td>
    <td>返回按钮</td>
    <td>点击返回【移动端帐号登录页面（P02）】</td>
  </tr>
  <tr>
    <td>2</td>
    <td>手机号输入框</td>
    <td>用于输入用户的手机号。<li>格式为11位数字，如果输入格式不正确，则在下方用红色字提示：“手机号格式不正确”</li><li>如果输入的手机号没有注册，则在下方用红色字提示：“该手机号未注册”</li></td>
  </tr>
  <tr>
    <td>3</td>
    <td>滑动验证</td>
    <td>用于防止网络攻击，验证通过才能点击【获取验证码】按钮</td>
  </tr>
  <tr>
    <td>4</td>
    <td>获取验证码按钮</td>
    <td>点击将发送验证码短信给用户，再次点击获取的时间间隔为300秒</td>
  </tr>
  <tr>
    <td>5</td>
    <td>短信验证码输入框</td>
    <td>用于输入收到的短信验证码。如果填写的验证码不对，则在下方用红色字提示：“验证码错误”</td>
  </tr>
  <tr>
    <td>6</td>
    <td>下一步按钮</td>
    <td>点击之后跳转到【移动端找回密码页面二（P04）】。默认情况下是灰色不可点击状态，只有用户输入了手机号和验证码之后，该按钮才变为可点击状态。点击之后检验短信验证码是否正确，正确则跳转，不正确则弹出提示信息，具体参考【5】</td>
  </tr>
</table>

#### 2.1.4 移动端找回密码页面二（P04）
<table>
  <tr>
    <th style="width:40%">用户界面</th>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td rowspan="999">
      <img src="../img/p2_1_4.png"/>
    </td>
    <td>1</td>
    <td>返回按钮</td>
    <td>点击返回到【移动端找回密码页面一（P03）】</td>
  </tr>
  <tr>
    <td>2</td>
    <td>新密码输入框</td>
    <td>用于设置新的登录密码</td>
  </tr>
  <tr>
    <td>3</td>
    <td>确认并登录按钮</td>
    <td>默认为灰色不可点击状态。用户输入了新的登录密码之后，该按钮变为可点击状态，点击之后自动登录APP</td>
  </tr>
</table>

#### 2.1.5 移动端注册页面一（P05）
<table>
  <tr>
    <th style="width:40%">用户界面</th>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td rowspan="999">
      <img src="../img/p2_1_5.png"/>
    </td>
    <td>1</td>
    <td>返回按钮</td>
    <td>点击返回到相应上级页面，该页面入口有：【移动端验证码登录页面（P01）】【移动端帐号登录页面（P02）】</td>
  </tr>
  <tr>
    <td>2</td>
    <td>手机号输入框</td>
    <td>用于输入用户的手机号。<li>格式为11位数字，如果输入格式不正确，则在下方用红色字提示：“手机号格式不正确”</li><li>如果输入的手机号已注册，则在下方用红色字提示：“该手机号已注册”</li></td>
  </tr>
  <tr>
    <td>3</td>
    <td>滑动验证</td>
    <td>用于防止网络攻击，验证通过才能点击【获取验证码】按钮</td>
  </tr>
  <tr>
    <td>4</td>
    <td>获取验证码按钮</td>
    <td>点击将发送验证码短信给用户，再次点击获取的时间间隔为300秒</td>
  </tr>
  <tr>
    <td>5</td>
    <td>短信验证码输入框</td>
    <td>用于输入收到的短信验证码。如果填写的验证码不对，则在下方用红色字提示：“验证码错误”</td>
  </tr>
  <tr>
    <td>6</td>
    <td>下一步按钮</td>
    <td>点击之后跳转到【移动端注册页面二（P06）】。默认情况下是灰色不可点击状态，只有用户输入了手机号和验证码之后，该按钮才变为可点击状态。点击之后检验短信验证码是否正确，正确则跳转，不正确则弹出提示信息，具体参考【5】</td>
  </tr>
  <tr>
    <td>7</td>
    <td>登录页面按钮</td>
    <td>点击之后跳转到【移动端验证码登录页面（P01）】</td>
  </tr>
</table>

#### 2.1.6 移动端注册页面二（P06）
<table>
  <tr>
    <th style="width:40%">用户界面</th>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td rowspan="999">
      <img src="../img/p2_1_6.png"/>
    </td>
    <td>1</td>
    <td>返回按钮</td>
    <td>点击返回到【移动端注册页面一（P05）】</td>
  </tr>
  <tr>
    <td>2</td>
    <td>头像</td>
    <td>用于显示用户的头像，默认分配一个头像</td>
  </tr>
  <tr>
    <td>3</td>
    <td>更改头像按钮</td>
    <td>用于更改用户的头像，点击之后打开头像上传方式弹窗，方式参考【6】【7】</td>
  </tr>
  <tr>
    <td>4</td>
    <td>昵称输入框</td>
    <td>用于设置用户的昵称。<li>昵称的规则为：最短4个字节，最长16个字节；由大小写字母、数字、汉字和下划线组成。如果用户输入的昵称不符合规则，则在下方用红色字提示：“昵称格式不正确”</li><li>如果用户昵称和其他人重复，则在下方用红色字提示：“该昵称已被使用”</li></td>
  </tr>
  <tr>
    <td>5</td>
    <td>确认并登录按钮</td>
    <td>初始状态为灰色不可点击，只有用户输入正确可用的昵称之后，该按钮变为可点击状态。点击之后自动登录到APP首页</li></td>
  </tr>
  <tr>
    <td>6</td>
    <td>拍照</td>
    <td>点击之后并获取打开手机照相机的权限，则可以拍照设置为头像</td>
  </tr>
  <tr>
    <td>7</td>
    <td>从手机相册选择</td>
    <td>点击之后并获取打开手机相册的权限，则可以在相册中选择图片上传头像</td>
  </tr>
  <tr>
    <td>8</td>
    <td>取消按钮</td>
    <td>点击之后关闭该弹窗</td>
  </tr>
</table>

#### 2.1.7 PC端验证码登录页面（P07）
<table>
  <tr>
    <img src="../img/p2_1_7.png"/>
  </tr>
  <tr>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td>1</td>
    <td>登录方式选择</td>
    <td>包括快速登录和帐号登录两种方式</td>
  </tr>
  <tr>
    <td>2</td>
    <td>手机号输入框</td>
    <td>用于输入用户的手机号。<li>格式为11位数字，如果输入格式不正确，则在下方用红色字提示：“手机号格式不正确”</li><li>如果输入的手机号没有注册，则在下方用红色字提示：“该手机号未注册”</li></td>
  </tr>
  <tr>
    <td>3</td>
    <td>滑动验证</td>
    <td>用于防止网络攻击，验证通过才能点击【获取验证码】按钮</td>
  </tr>
  <tr>
    <td>4</td>
    <td>获取验证码按钮</td>
    <td>点击将发送验证码短信给用户，再次点击获取的时间间隔为300秒</td>
  </tr>
  <tr>
    <td>5</td>
    <td>短信验证码输入框</td>
    <td>用于输入收到的短信验证码。如果填写的验证码不对，则在下方用红色字提示：“验证码错误”</td>
  </tr>
  <tr>
    <td>6</td>
    <td>登录按钮</td>
    <td>点击之后可以登录。默认情况下是灰色不可点击状态，只有用户输入了手机号和验证码之后，该按钮才变为可点击状态。点击之后检验短信验证码是否正确，正确则登录，不正确则弹出提示信息，具体参考【5】</td>
  </tr>
  <tr>
    <td>7</td>
    <td>微信扫码登录</td>
    <td>点击之后打开微信二维码界面</td>
  </tr>
  <tr>
    <td>8</td>
    <td>注册按钮</td>
    <td>点击之后跳转到【PC端注册页面一（P11）】</td>
  </tr>
</table>

#### 2.1.8 PC端帐号登录页面（P08）
<table>
  <tr>
    <img src="../img/p2_1_8.png"/>
  </tr>
  <tr>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td>1</td>
    <td>登录方式选择</td>
    <td>包括快速登录和帐号登录两种方式</td>
  </tr>
  <tr>
    <td>2</td>
    <td>手机号或用户名输入框</td>
    <td>用于输入用户的手机号或用户名。<li>格式为数字、大小写字母、汉字和下划线。最短为4个字节，最长为16个字节。如果输入格式不正确，则在下方用红色字提示：“手机号或用户名格式不正确”</li><li>如果输入的手机号或用户名不正确，则在下方用红色字提示：“手机号或用户名不正确”</li></td>
  </tr>
  <tr>
    <td>3</td>
    <td>登录密码输入框</td>
    <td>用于输入登录密码。<li>如果输入密码不正确，则在下方用红色字提示：“密码错误”</li></td>
  </tr>
  <tr>
    <td>4</td>
    <td>忘记密码按钮</td>
    <td>点击跳转到【PC端找回密码页面一（P09）】</td>
  </tr>
  <tr>
    <td>5</td>
    <td>登录按钮</td>
    <td>点击之后可以登录。默认情况下是灰色不可点击状态，只有用户输入了手机号/用户名和密码之后，该按钮才变为可点击状态。点击之后检验手机号/用户名和密码是否正确匹配，正确则登录，不正确则弹出提示信息，具体参考【2】和【3】</td>
  </tr>
  <tr>
    <td>6</td>
    <td>微信扫码登录</td>
    <td>点击之后打开微信二维码界面</td>
  </tr>
  <tr>
    <td>7</td>
    <td>注册按钮</td>
    <td>点击之后跳转到【PC端注册页面一（P11）】</td>
  </tr>
</table>

#### 2.1.9 PC端找回密码页面一（P09）
<table>
  <tr>
    <img src="../img/p2_1_9.png"/>
  </tr>
  <tr>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td>1</td>
    <td>步骤</td>
    <td>显示当前处于找回密码的第几个步骤</td>
  </tr>
  <tr>
    <td>2</td>
    <td>手机号输入框</td>
    <td>用于输入用户的手机号。<li>格式为11位数字，如果输入格式不正确，则在下方用红色字提示：“手机号格式不正确”</li><li>如果输入的手机号没有注册，则在下方用红色字提示：“该手机号未注册”</li></td>
  </tr>
  <tr>
    <td>3</td>
    <td>滑动验证</td>
    <td>用于防止网络攻击，验证通过才能点击【获取验证码】按钮</td>
  </tr>
  <tr>
    <td>4</td>
    <td>获取验证码按钮</td>
    <td>点击将发送验证码短信给用户，再次点击获取的时间间隔为300秒</td>
  </tr>
  <tr>
    <td>5</td>
    <td>短信验证码输入框</td>
    <td>用于输入收到的短信验证码。如果填写的验证码不对，则在下方用红色字提示：“验证码错误”</td>
  </tr>
  <tr>
    <td>6</td>
    <td>下一步按钮</td>
    <td>点击之后跳转到【PC端找回密码页面二（P10）】。默认情况下是灰色不可点击状态，只有用户输入了手机号和验证码之后，该按钮才变为可点击状态。点击之后检验短信验证码是否正确，正确则跳转，不正确则弹出提示信息，具体参考【5】</td>
  </tr>
  <tr>
    <td>7</td>
    <td>注册按钮</td>
    <td>点击之后跳转到【PC端注册页面一（P11）】</td>
  </tr>
</table>

#### 2.1.10 PC端找回密码页面二（P10）
<table>
  <tr>
    <img src="../img/p2_1_10.png"/>
  </tr>
  <tr>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td>1</td>
    <td>步骤</td>
    <td>显示当前处于找回密码的第几个步骤</td>
  </tr>
  <tr>
    <td>2</td>
    <td>新密码输入框</td>
    <td>用于设置新的登录密码</td>
  </tr>
  <tr>
    <td>3</td>
    <td>确认并登录按钮</td>
    <td>默认为灰色不可点击状态。用户输入了新的登录密码之后，该按钮变为可点击状态，点击之后自动登录</td>
  </tr>
  <tr>
    <td>4</td>
    <td>注册按钮</td>
    <td>点击之后跳转到【PC端注册页面一（P11）】</td>
  </tr>
</table>

#### 2.1.11 PC端注册页面一（P11）
<table>
  <tr>
    <img src="../img/p2_1_11.png"/>
  </tr>
  <tr>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td>1</td>
    <td>手机号输入框</td>
    <td>用于输入用户的手机号。<li>格式为11位数字，如果输入格式不正确，则在下方用红色字提示：“手机号格式不正确”</li><li>如果输入的手机号已注册，则在下方用红色字提示：“该手机号已注册”</li></td>
  </tr>
  <tr>
    <td>2</td>
    <td>滑动验证</td>
    <td>用于防止网络攻击，验证通过才能点击【获取验证码】按钮</td>
  </tr>
  <tr>
    <td>3</td>
    <td>获取验证码按钮</td>
    <td>点击将发送验证码短信给用户，再次点击获取的时间间隔为300秒</td>
  </tr>
  <tr>
    <td>4</td>
    <td>短信验证码输入框</td>
    <td>用于输入收到的短信验证码。如果填写的验证码不对，则在下方用红色字提示：“验证码错误”</td>
  </tr>
  <tr>
    <td>5</td>
    <td>杏林学堂用户协议</td>
    <td>点击蓝色部分打开杏林学堂用户协议，勾选之后才可以点击下一步按钮</td>
  </tr>
  <tr>
    <td>6</td>
    <td>下一步按钮</td>
    <td>点击之后跳转到【PC端注册页面二（P12）】。默认情况下是灰色不可点击状态，只有用户输入了手机号和验证码，并勾选了我已阅读并同意杏林学堂用户协议之后，该按钮才变为可点击状态。点击之后检验短信验证码是否正确，正确则跳转，不正确则弹出提示信息，具体参考【4】</td>
  </tr>
  <tr>
    <td>7</td>
    <td>登录页面按钮</td>
    <td>点击之后跳转到【PC端验证码登录页面（P07）】</td>
  </tr>
</table>

#### 2.1.12 PC端注册页面二（P12）
<table>
  <tr>
      <img src="../img/p2_1_12.png"/>
  </tr>
  <tr>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td>1</td>
    <td>头像</td>
    <td>用于显示用户的头像，默认分配一个头像</td>
  </tr>
  <tr>
    <td>2</td>
    <td>更改头像按钮</td>
    <td>用于更改用户的头像，点击之后可以从本地上传图片当作头像</td>
  </tr>
  <tr>
    <td>3</td>
    <td>昵称输入框</td>
    <td>用于设置用户的昵称。<li>昵称的规则为：最短4个字节，最长16个字节；由大小写字母、数字、汉字和下划线组成。如果用户输入的昵称不符合规则，则在下方用红色字提示：“昵称格式不正确”</li><li>如果用户昵称和其他人重复，则在下方用红色字提示：“该昵称已被使用”</li></td>
  </tr>
  <tr>
    <td>4</td>
    <td>确认并登录按钮</td>
    <td>初始状态为灰色不可点击，只有用户输入正确可用的昵称之后，该按钮变为可点击状态。点击之后自动登录</li></td>
  </tr>
  <tr>
    <td>5</td>
    <td>登录跳转按钮</td>
    <td>点击之后跳转到【PC端验证码登录页面（P07）】</td>
  </tr>
</table>

#### 2.1.13 微信扫码绑定手机号页面（P13）
<table>
  <tr>
    <th style="width:40%">用户界面</th>
    <th>编号</th>
    <th>名称</th>
    <th>功能、交互说明</th>
  </tr>
  <tr>
    <td rowspan="999">
      <img src="../img/p2_1_13.png"/>
    </td>
    <td>1</td>
    <td>返回按钮</td>
    <td>如果是扫描的web页面的二维码，则返回微信首页；如果是从APP第三方快捷登录进入，则返回到【移动端验证码登录页面（P01）】</td>
  </tr>
  <tr>
    <td>2</td>
    <td>用户昵称</td>
    <td>默认填充微信昵称，点击之后可以修改。如果和其他用户重复了，则在下方用红色的字提示：“该昵称已被使用”</td>
  </tr>
  <tr>
    <td>3</td>
    <td>手机号输入框</td>
    <td>用于输入用户的手机号。<li>格式为11位数字，如果输入格式不正确，则在下方用红色字提示：“手机号格式不正确”</li><li>如果输入的手机号没有注册，则在下方用红色字提示：“该手机号未注册”</li></td>
  </tr>
  <tr>
    <td>4</td>
    <td>滑动验证</td>
    <td>用于防止网络攻击，验证通过才能点击【获取验证码】按钮</td>
  </tr>
  <tr>
    <td>5</td>
    <td>获取验证码按钮</td>
    <td>点击将发送验证码短信给用户，再次点击获取的时间间隔为300秒</td>
  </tr>
  <tr>
    <td>6</td>
    <td>短信验证码输入框</td>
    <td>用于输入收到的短信验证码。如果填写的验证码不对，则在下方用红色字提示：“验证码错误”</td>
  </tr>
  <tr>
    <td>7</td>
    <td>登录按钮</td>
    <td>点击之后可以登录APP。默认情况下是灰色不可点击状态，只有用户输入了手机号和验证码之后，该按钮才变为可点击状态。点击之后检验短信验证码是否正确，正确则登录，不正确则弹出提示信息，具体参考【6】</td>
  </tr>
</table>
